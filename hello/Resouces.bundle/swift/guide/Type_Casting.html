<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name="viewport" content=" width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
    <link rel="stylesheet" href="../../markdown.css" />
    <title>Type_Casting</title>
</head>
<body class='typora-export'><div class='typora-export-content'>
<div id='write'><p><em><span>类型转换</span></em><span>可以判断实例的类型，也可以将实例看做是其父类或者子类的实例。</span></p><p><span>类型转换在 Swift 中使用 </span><code>is</code><span> 和 </span><code>as</code><span> 操作符实现。这两个操作符分别提供了一种简单达意的方式去检查值的类型或者转换它的类型。</span></p><p><span>你也可以用它来检查一个类型是否遵循了某个协议，就像在 </span><a href='./21_Protocols.md#checking-for-protocol-conformance'><span>检验协议遵循</span></a><span> 部分讲述的一样。</span></p><h2 id='为类型转换定义类层次'><span>为类型转换定义类层次 </span></h2><p><span>你可以将类型转换用在类和子类的层次结构上，检查特定类实例的类型并且转换这个类实例的类型成为这个层次结构中的其他类型。下面的三个代码段定义了一个类层次和一个包含了这些类实例的数组，作为类型转换的例子。</span></p><p><span>第一个代码片段定义了一个新的基类 </span><code>MediaItem</code><span>。这个类为任何出现在数字媒体库的媒体项提供基础功能。特别的，它声明了一个 </span><code>String</code><span> 类型的 </span><code>name</code><span> 属性，和一个 </span><code>init(name:)</code><span> 初始化器。（假定所有的媒体项都有个名称。）</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="swift"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="swift"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-def">MediaItem</span> <span class="cm-punctuation">{</span></span></pre></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">var</span> <span class="cm-def">name</span><span class="cm-punctuation">:</span> <span class="cm-variable-2">String</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">init</span><span class="cm-punctuation">(</span><span class="cm-variable">name</span><span class="cm-punctuation">:</span> <span class="cm-variable-2">String</span><span class="cm-punctuation">)</span> <span class="cm-punctuation">{</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-atom">self</span><span class="cm-property">.name</span> <span class="cm-operator">=</span> <span class="cm-variable">name</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-punctuation">}</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">}</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 132px;"></div><div class="CodeMirror-gutters" style="display: none; height: 132px;"></div></div></div></pre><p><span>下一个代码段定义了 </span><code>MediaItem</code><span> 的两个子类。第一个子类 </span><code>Movie</code><span> 封装了与电影相关的额外信息，在父类（或者说基类）的基础上增加了一个 </span><code>director</code><span>（导演）属性，和相应的初始化器。第二个子类 </span><code>Song</code><span>，在父类的基础上增加了一个 </span><code>artist</code><span>（艺术家）属性，和相应的初始化器：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="swift" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="swift"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-def">Movie</span><span class="cm-punctuation">:</span> <span class="cm-variable">MediaItem</span> <span class="cm-punctuation">{</span></span></pre></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">var</span> <span class="cm-def">director</span><span class="cm-punctuation">:</span> <span class="cm-variable-2">String</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">init</span><span class="cm-punctuation">(</span><span class="cm-variable">name</span><span class="cm-punctuation">:</span> <span class="cm-variable-2">String</span><span class="cm-punctuation">,</span> <span class="cm-variable">director</span><span class="cm-punctuation">:</span> <span class="cm-variable-2">String</span><span class="cm-punctuation">)</span> <span class="cm-punctuation">{</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-atom">self</span><span class="cm-property">.director</span> <span class="cm-operator">=</span> <span class="cm-variable">director</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-atom">super</span><span class="cm-property">.init</span><span class="cm-punctuation">(</span><span class="cm-variable">name</span><span class="cm-punctuation">:</span> <span class="cm-variable">name</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-punctuation">}</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">}</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-def">Song</span><span class="cm-punctuation">:</span> <span class="cm-variable">MediaItem</span> <span class="cm-punctuation">{</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">var</span> <span class="cm-def">artist</span><span class="cm-punctuation">:</span> <span class="cm-variable-2">String</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">init</span><span class="cm-punctuation">(</span><span class="cm-variable">name</span><span class="cm-punctuation">:</span> <span class="cm-variable-2">String</span><span class="cm-punctuation">,</span> <span class="cm-variable">artist</span><span class="cm-punctuation">:</span> <span class="cm-variable-2">String</span><span class="cm-punctuation">)</span> <span class="cm-punctuation">{</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-atom">self</span><span class="cm-property">.artist</span> <span class="cm-operator">=</span> <span class="cm-variable">artist</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-atom">super</span><span class="cm-property">.init</span><span class="cm-punctuation">(</span><span class="cm-variable">name</span><span class="cm-punctuation">:</span> <span class="cm-variable">name</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-punctuation">}</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">}</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 330px;"></div><div class="CodeMirror-gutters" style="display: none; height: 330px;"></div></div></div></pre><p><span>最后一个代码段创建了一个数组常量 </span><code>library</code><span>，包含两个 </span><code>Movie</code><span> 实例和三个 </span><code>Song</code><span> 实例。</span><code>library</code><span> 的类型是在它被初始化时根据它数组中所包含的内容推断来的。Swift 的类型检测器能够推断出 </span><code>Movie</code><span> 和 </span><code>Song</code><span> 有共同的父类 </span><code>MediaItem</code><span>，所以它推断出 </span><code>[MediaItem]</code><span> 类作为 </span><code>library</code><span> 的类型：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="swift"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="swift"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span> <span class="cm-def">library</span> <span class="cm-operator">=</span> <span class="cm-punctuation">[</span></span></pre></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Movie</span><span class="cm-punctuation">(</span><span class="cm-variable">name</span><span class="cm-punctuation">:</span> <span class="cm-string">"Casablanca"</span><span class="cm-punctuation">,</span> <span class="cm-variable">director</span><span class="cm-punctuation">:</span> <span class="cm-string">"Michael Curtiz"</span><span class="cm-punctuation">),</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Song</span><span class="cm-punctuation">(</span><span class="cm-variable">name</span><span class="cm-punctuation">:</span> <span class="cm-string">"Blue Suede Shoes"</span><span class="cm-punctuation">,</span> <span class="cm-variable">artist</span><span class="cm-punctuation">:</span> <span class="cm-string">"Elvis Presley"</span><span class="cm-punctuation">),</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Movie</span><span class="cm-punctuation">(</span><span class="cm-variable">name</span><span class="cm-punctuation">:</span> <span class="cm-string">"Citizen Kane"</span><span class="cm-punctuation">,</span> <span class="cm-variable">director</span><span class="cm-punctuation">:</span> <span class="cm-string">"Orson Welles"</span><span class="cm-punctuation">),</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Song</span><span class="cm-punctuation">(</span><span class="cm-variable">name</span><span class="cm-punctuation">:</span> <span class="cm-string">"The One And Only"</span><span class="cm-punctuation">,</span> <span class="cm-variable">artist</span><span class="cm-punctuation">:</span> <span class="cm-string">"Chesney Hawkes"</span><span class="cm-punctuation">),</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Song</span><span class="cm-punctuation">(</span><span class="cm-variable">name</span><span class="cm-punctuation">:</span> <span class="cm-string">"Never Gonna Give You Up"</span><span class="cm-punctuation">,</span> <span class="cm-variable">artist</span><span class="cm-punctuation">:</span> <span class="cm-string">"Rick Astley"</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">]</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 数组 library 的类型被推断为 [MediaItem]</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 286px;"></div><div class="CodeMirror-gutters" style="display: none; height: 286px;"></div></div></div></pre><p><span>在幕后 </span><code>library</code><span> 里存储的媒体项依然是 </span><code>Movie</code><span> 和 </span><code>Song</code><span> 类型的。但是，若你迭代它，依次取出的实例会是 </span><code>MediaItem</code><span> 类型的，而不是 </span><code>Movie</code><span> 和 </span><code>Song</code><span> 类型。为了让它们作为原本的类型工作，你需要检查它们的类型或者向下转换它们到其它类型，就像下面描述的一样。</span></p><h2 id='检查类型'><span>检查类型 </span></h2><p><span>用</span><em><span>类型检查操作符</span></em><span>（</span><code>is</code><span>）来检查一个实例是否属于特定子类型。若实例属于那个子类型，类型检查操作符返回 </span><code>true</code><span>，否则返回 </span><code>false</code><span>。</span></p><p><span>下面的例子定义了两个变量，</span><code>movieCount</code><span> 和 </span><code>songCount</code><span>，用来计算数组 </span><code>library</code><span> 中 </span><code>Movie</code><span> 和 </span><code>Song</code><span> 类型的实例数量：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="swift"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="swift"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">movieCount</span> <span class="cm-operator">=</span> <span class="cm-number">0</span></span></pre></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">songCount</span> <span class="cm-operator">=</span> <span class="cm-number">0</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-def">item</span> <span class="cm-keyword">in</span> <span class="cm-variable">library</span> <span class="cm-punctuation">{</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">item</span> <span class="cm-keyword">is</span> <span class="cm-variable">Movie</span> <span class="cm-punctuation">{</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">movieCount</span> <span class="cm-operator">+=</span> <span class="cm-number">1</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-punctuation">}</span> <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> <span class="cm-variable">item</span> <span class="cm-keyword">is</span> <span class="cm-variable">Song</span> <span class="cm-punctuation">{</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">songCount</span> <span class="cm-operator">+=</span> <span class="cm-number">1</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-punctuation">}</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">}</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">print</span><span class="cm-punctuation">(</span><span class="cm-string">"Media library contains \(</span><span class="cm-variable">movieCount</span><span class="cm-string">) movies and \(</span><span class="cm-variable">songCount</span><span class="cm-string">) songs"</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 打印“Media library contains 2 movies and 3 songs”</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 308px;"></div><div class="CodeMirror-gutters" style="display: none; height: 308px;"></div></div></div></pre><p><span>示例迭代了数组 </span><code>library</code><span> 中的所有项。每一次，</span><code>for-in</code><span> 循环设置</span>
<code>item</code><span> 常量为数组中的下一个 </span><code>MediaItem</code><span> 实例。</span></p><p><span>若当前 </span><code>MediaItem</code><span> 是一个 </span><code>Movie</code><span> 类型的实例，</span><code>item is Movie</code><span> 返回</span>
<code>true</code><span>，否则返回 </span><code>false</code><span>。同样的，</span><code>item is Song</code><span> 检查 </span><code>item</code><span> 是否为 </span><code>Song</code><span> 类型的实例。在循环结束后，</span><code>movieCount</code><span> 和 </span><code>songCount</code><span> 的值就是被找到的属于各自类型的实例的数量。</span></p><h2 id='向下转型'><span>向下转型 </span></h2><p><span>某类型的一个常量或变量可能在幕后实际上属于一个子类。当确定是这种情况时，你可以尝试用</span><em><span>类型转换操作符</span></em><span>（</span><code>as?</code><span> 或 </span><code>as!</code><span>）向下转到它的子类型。</span></p><p><span>因为向下转型可能会失败，类型转型操作符带有两种不同形式。条件形式 </span><code>as?</code><span> 返回一个你试图向下转成的类型的可选值。强制形式 </span><code>as!</code><span> 把试图向下转型和强制解包转换结果结合为一个操作。</span></p><p><span>当你不确定向下转型可以成功时，用类型转换的条件形式（</span><code>as?</code><span>）。条件形式的类型转换总是返回一个可选值，并且若下转是不可能的，可选值将是 </span><code>nil</code><span>。这使你能够检查向下转型是否成功。</span></p><p><span>只有你可以确定向下转型一定会成功时，才使用强制形式（</span><code>as!</code><span>）。当你试图向下转型为一个不正确的类型时，强制形式的类型转换会触发一个运行时错误。</span></p><p><span>下面的例子，迭代了 </span><code>library</code><span> 里的每一个 </span><code>MediaItem</code><span>，并打印出适当的描述。要这样做，</span><code>item</code><span> 需要真正作为 </span><code>Movie</code><span> 或 </span><code>Song</code><span> 的类型来使用，而不仅仅是作为 </span><code>MediaItem</code><span>。为了能够在描述中使用 </span><code>Movie</code><span> 或 </span><code>Song</code><span> 的 </span><code>director</code><span> 或 </span><code>artist</code><span> 属性，这是必要的。</span></p><p><span>在这个示例中，数组中的每一个 </span><code>item</code><span> 可能是 </span><code>Movie</code><span> 或 </span><code>Song</code><span>。事前你不知道每个 </span><code>item</code><span> 的真实类型，所以这里使用条件形式的类型转换（</span><code>as?</code><span>）去检查循环里的每次下转：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="swift"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="swift"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-def">item</span> <span class="cm-keyword">in</span> <span class="cm-variable">library</span> <span class="cm-punctuation">{</span></span></pre></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-keyword">let</span> <span class="cm-def">movie</span> <span class="cm-operator">=</span> <span class="cm-variable">item</span> <span class="cm-keyword">as</span><span class="cm-operator">?</span> <span class="cm-variable">Movie</span> <span class="cm-punctuation">{</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">print</span><span class="cm-punctuation">(</span><span class="cm-string">"Movie: \(</span><span class="cm-variable">movie</span><span class="cm-property">.name</span><span class="cm-string">), dir. \(</span><span class="cm-variable">movie</span><span class="cm-property">.director</span><span class="cm-string">)"</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-punctuation">}</span> <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> <span class="cm-keyword">let</span> <span class="cm-def">song</span> <span class="cm-operator">=</span> <span class="cm-variable">item</span> <span class="cm-keyword">as</span><span class="cm-operator">?</span> <span class="cm-variable">Song</span> <span class="cm-punctuation">{</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">print</span><span class="cm-punctuation">(</span><span class="cm-string">"Song: \(</span><span class="cm-variable">song</span><span class="cm-property">.name</span><span class="cm-string">), by \(</span><span class="cm-variable">song</span><span class="cm-property">.artist</span><span class="cm-string">)"</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-punctuation">}</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">}</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Movie: Casablanca, dir. Michael Curtiz</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Song: Blue Suede Shoes, by Elvis Presley</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Movie: Citizen Kane, dir. Orson Welles</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Song: The One And Only, by Chesney Hawkes</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Song: Never Gonna Give You Up, by Rick Astley</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 308px;"></div><div class="CodeMirror-gutters" style="display: none; height: 308px;"></div></div></div></pre><p><span>示例首先试图将 </span><code>item</code><span> 下转为 </span><code>Movie</code><span>。因为 </span><code>item</code><span> 是一个 </span><code>MediaItem</code>
<span>类型的实例，它可能是一个 </span><code>Movie</code><span>；同样，它也可能是一个 </span><code>Song</code><span>，或者仅仅是基类</span>
<code>MediaItem</code><span>。因为不确定，</span><code>as?</code><span> 形式在试图下转时将返回一个可选值。</span><code>item as? Movie</code><span> 的返回值是 </span><code>Movie?</code><span> 或者说“可选 </span><code>Movie</code><span>”。</span></p><p><span>当向下转型为 </span><code>Movie</code><span> 应用在两个 </span><code>Song</code>
<span>实例时将会失败。为了处理这种情况，上面的例子使用了可选绑定（optional binding）来检查可选 </span><code>Movie</code><span> 真的包含一个值（这个是为了判断下转是否成功。）可选绑定是这样写的“</span><code>if let movie = item as? Movie</code><span>”，可以这样解读：</span></p><p><span>“尝试将 </span><code>item</code><span> 转为 </span><code>Movie</code><span> 类型。若成功，设置一个新的临时常量 </span><code>movie</code><span> 来存储返回的可选 </span><code>Movie</code><span> 中的值”</span></p><p><span>若向下转型成功，然后 </span><code>movie</code><span> 的属性将用于打印一个 </span><code>Movie</code><span> 实例的描述，包括它的导演的名字 </span><code>director</code><span>。相似的原理被用来检测 </span><code>Song</code><span> 实例，当 </span><code>Song</code><span> 被找到时则打印它的描述（包含 </span><code>artist</code><span> 的名字）。</span></p><blockquote><p><span>注意</span></p><p><span>转换没有真的改变实例或它的值。根本的实例保持不变；只是简单地把它作为它被转换成的类型来使用。</span></p></blockquote><h2 id='any-和-anyobject-的类型转换'><code>Any</code><span> 和 </span><code>AnyObject</code><span> 的类型转换 </span></h2><p><span>Swift 为不确定类型提供了两种特殊的类型别名：</span></p><ul><li><code>Any</code><span> 可以表示任何类型，包括函数类型。</span></li><li><code>AnyObject</code><span> 可以表示任何类类型的实例。</span></li></ul><p><span>只有当你确实需要它们的行为和功能时才使用 </span><code>Any</code><span> 和 </span><code>AnyObject</code><span>。最好还是在代码中指明需要使用的类型。</span></p><p><span>这里有个示例，使用 </span><code>Any</code><span> 类型来和混合的不同类型一起工作，包括函数类型和非类类型。它创建了一个可以存储 </span><code>Any</code><span> 类型的数组 </span><code>things</code><span>：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="swift"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="swift"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">things</span><span class="cm-punctuation">:</span> <span class="cm-punctuation">[</span><span class="cm-keyword">Any</span><span class="cm-punctuation">]</span> <span class="cm-operator">=</span> <span class="cm-punctuation">[]</span></span></pre></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">things</span><span class="cm-property">.append</span><span class="cm-punctuation">(</span><span class="cm-number">0</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">things</span><span class="cm-property">.append</span><span class="cm-punctuation">(</span><span class="cm-number">0.0</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">things</span><span class="cm-property">.append</span><span class="cm-punctuation">(</span><span class="cm-number">42</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">things</span><span class="cm-property">.append</span><span class="cm-punctuation">(</span><span class="cm-number">3.14159</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">things</span><span class="cm-property">.append</span><span class="cm-punctuation">(</span><span class="cm-string">"hello"</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">things</span><span class="cm-property">.append</span><span class="cm-punctuation">((</span><span class="cm-number">3.0</span><span class="cm-punctuation">,</span> <span class="cm-number">5.0</span><span class="cm-punctuation">))</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">things</span><span class="cm-property">.append</span><span class="cm-punctuation">(</span><span class="cm-variable">Movie</span><span class="cm-punctuation">(</span><span class="cm-variable">name</span><span class="cm-punctuation">:</span> <span class="cm-string">"Ghostbusters"</span><span class="cm-punctuation">,</span> <span class="cm-variable">director</span><span class="cm-punctuation">:</span> <span class="cm-string">"Ivan Reitman"</span><span class="cm-punctuation">))</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">things</span><span class="cm-property">.append</span><span class="cm-punctuation">({</span> <span class="cm-punctuation">(</span><span class="cm-variable">name</span><span class="cm-punctuation">:</span> <span class="cm-variable-2">String</span><span class="cm-punctuation">)</span> <span class="cm-operator">-&gt;</span> <span class="cm-variable-2">String</span> <span class="cm-keyword">in</span> <span class="cm-string">"Hello, \(</span><span class="cm-variable">name</span><span class="cm-string">)"</span> <span class="cm-punctuation">})</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 264px;"></div><div class="CodeMirror-gutters" style="display: none; height: 264px;"></div></div></div></pre><p><code>things</code><span> 数组包含两个 </span><code>Int</code><span> 值，两个 </span><code>Double</code><span> 值，一个 </span><code>String</code><span> 值，一个元组 </span><code>(Double, Double)</code><span>，一个 </span><code>Movie</code><span> 实例“Ghostbusters”，以及一个接受 </span><code>String</code><span> 值并返回另一个 </span><code>String</code><span> 值的闭包表达式。</span></p><p><span>你可以在 </span><code>switch</code><span> 表达式的 </span><code>case</code><span> 中使用 </span><code>is</code><span> 和 </span><code>as</code><span> 操作符来找出只知道是 </span><code>Any</code><span> 或 </span><code>AnyObject</code><span> 类型的常量或变量的具体类型。下面的示例迭代 </span><code>things</code><span> 数组中的每一项，并用 </span><code>switch</code><span> 语句查找每一项的类型。有几个 </span><code>switch</code><span> 语句的 </span><code>case</code><span> 绑定它们匹配到的值到一个指定类型的常量，从而可以打印这些值：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="swift" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="swift"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-def">thing</span> <span class="cm-keyword">in</span> <span class="cm-variable">things</span> <span class="cm-punctuation">{</span></span></pre></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">switch</span> <span class="cm-variable">thing</span> <span class="cm-punctuation">{</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-number">0</span> <span class="cm-keyword">as</span> <span class="cm-variable-2">Int</span><span class="cm-punctuation">:</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">print</span><span class="cm-punctuation">(</span><span class="cm-string">"zero as an Int"</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-number">0</span> <span class="cm-keyword">as</span> <span class="cm-variable-2">Double</span><span class="cm-punctuation">:</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">print</span><span class="cm-punctuation">(</span><span class="cm-string">"zero as a Double"</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-keyword">let</span> <span class="cm-def">someInt</span> <span class="cm-keyword">as</span> <span class="cm-variable-2">Int</span><span class="cm-punctuation">:</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">print</span><span class="cm-punctuation">(</span><span class="cm-string">"an integer value of \(</span><span class="cm-variable">someInt</span><span class="cm-string">)"</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-keyword">let</span> <span class="cm-def">someDouble</span> <span class="cm-keyword">as</span> <span class="cm-variable-2">Double</span> <span class="cm-keyword">where</span> <span class="cm-variable">someDouble</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span><span class="cm-punctuation">:</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">print</span><span class="cm-punctuation">(</span><span class="cm-string">"a positive double value of \(</span><span class="cm-variable">someDouble</span><span class="cm-string">)"</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-keyword">is</span> <span class="cm-variable-2">Double</span><span class="cm-punctuation">:</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">print</span><span class="cm-punctuation">(</span><span class="cm-string">"some other double value that I don't want to print"</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-keyword">let</span> <span class="cm-def">someString</span> <span class="cm-keyword">as</span> <span class="cm-variable-2">String</span><span class="cm-punctuation">:</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">print</span><span class="cm-punctuation">(</span><span class="cm-string">"a string value of \"\(</span><span class="cm-variable">someString</span><span class="cm-string">)\""</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-keyword">let</span> <span class="cm-punctuation">(</span><span class="cm-variable">x</span><span class="cm-punctuation">,</span> <span class="cm-variable">y</span><span class="cm-punctuation">)</span> <span class="cm-keyword">as</span> <span class="cm-punctuation">(</span><span class="cm-variable-2">Double</span><span class="cm-punctuation">,</span> <span class="cm-variable-2">Double</span><span class="cm-punctuation">):</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">print</span><span class="cm-punctuation">(</span><span class="cm-string">"an (x, y) point at \(</span><span class="cm-variable">x</span><span class="cm-string">), \(</span><span class="cm-variable">y</span><span class="cm-string">)"</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-keyword">let</span> <span class="cm-def">movie</span> <span class="cm-keyword">as</span> <span class="cm-variable">Movie</span><span class="cm-punctuation">:</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">print</span><span class="cm-punctuation">(</span><span class="cm-string">"a movie called \(</span><span class="cm-variable">movie</span><span class="cm-property">.name</span><span class="cm-string">), dir. \(</span><span class="cm-variable">movie</span><span class="cm-property">.director</span><span class="cm-string">)"</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-keyword">let</span> <span class="cm-def">stringConverter</span> <span class="cm-keyword">as</span> <span class="cm-punctuation">(</span><span class="cm-variable-2">String</span><span class="cm-punctuation">)</span> <span class="cm-operator">-&gt;</span> <span class="cm-variable-2">String</span><span class="cm-punctuation">:</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">print</span><span class="cm-punctuation">(</span><span class="cm-variable">stringConverter</span><span class="cm-punctuation">(</span><span class="cm-string">"Michael"</span><span class="cm-punctuation">))</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">default</span><span class="cm-punctuation">:</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">print</span><span class="cm-punctuation">(</span><span class="cm-string">"something else"</span><span class="cm-punctuation">)</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-punctuation">}</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">}</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// zero as an Int</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// zero as a Double</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// an integer value of 42</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// a positive double value of 3.14159</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// a string value of "hello"</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// an (x, y) point at 3.0, 5.0</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// a movie called Ghostbusters, dir. Ivan Reitman</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Hello, Michael</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 770px;"></div><div class="CodeMirror-gutters" style="display: none; height: 770px;"></div></div></div></pre><blockquote><p><span>注意</span></p><p><code>Any</code><span> 类型可以表示所有类型的值，包括可选类型。Swift 会在你用 </span><code>Any</code><span> 类型来表示一个可选值的时候，给你一个警告。如果你确实想使用 </span><code>Any</code><span> 类型来承载可选值，你可以使用 </span><code>as</code><span> 操作符显式转换为 </span><code>Any</code><span>，如下所示：</span></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="swift"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="swift"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span> <span class="cm-def">optionalNumber</span><span class="cm-punctuation">:</span> <span class="cm-variable-2">Int</span><span class="cm-operator">?</span> <span class="cm-operator">=</span> <span class="cm-number">3</span></span></pre></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">things</span><span class="cm-property">.append</span><span class="cm-punctuation">(</span><span class="cm-variable">optionalNumber</span><span class="cm-punctuation">)</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// 警告</span></span></pre><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">things</span><span class="cm-property">.append</span><span class="cm-punctuation">(</span><span class="cm-variable">optionalNumber</span> <span class="cm-keyword">as</span> <span class="cm-keyword">Any</span><span class="cm-punctuation">)</span> <span class="cm-comment">// 没有警告</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 66px;"></div><div class="CodeMirror-gutters" style="display: none; height: 66px;"></div></div></div></pre><p>&nbsp;</p></div></div>
</body>
</html>
